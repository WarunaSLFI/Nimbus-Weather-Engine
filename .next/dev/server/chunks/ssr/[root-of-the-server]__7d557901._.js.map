{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/SearchBox.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { Search, MapPin, X, Loader2 } from \"lucide-react\";\r\nimport { SearchResultItem } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    onSelectCity: (query: string) => void;\r\n}\r\n\r\n// Debounce Helper\r\nfunction useDebounce<T>(value: T, delay: number): T {\r\n    const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => setDebouncedValue(value), delay);\r\n        return () => clearTimeout(handler);\r\n    }, [value, delay]);\r\n    return debouncedValue;\r\n}\r\n\r\nexport default function SearchBox({ onSelectCity }: Props) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const debouncedQuery = useDebounce(query, 300);\r\n\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [suggestions, setSuggestions] = useState<SearchResultItem[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [activeIndex, setActiveIndex] = useState(-1);\r\n\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n    const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n    // Fetch Logic\r\n    useEffect(() => {\r\n        if (!debouncedQuery || debouncedQuery.length < 2) {\r\n            setSuggestions([]);\r\n            return;\r\n        }\r\n\r\n        if (abortControllerRef.current) {\r\n            abortControllerRef.current.abort();\r\n        }\r\n        const controller = new AbortController();\r\n        abortControllerRef.current = controller;\r\n\r\n        setIsLoading(true);\r\n\r\n        fetch(`/api/search?q=${encodeURIComponent(debouncedQuery)}`, { signal: controller.signal })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.results) {\r\n                    setSuggestions(data.results);\r\n                    setIsOpen(true);\r\n                    setActiveIndex(-1);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err.name !== 'AbortError') console.error(err);\r\n            })\r\n            .finally(() => {\r\n                setIsLoading(false);\r\n            });\r\n\r\n    }, [debouncedQuery]);\r\n\r\n    // Click Outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    // Keyboard Nav\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (!isOpen || suggestions.length === 0) return;\r\n\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            setActiveIndex(prev => (prev < suggestions.length - 1 ? prev + 1 : 0));\r\n        } else if (e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            setActiveIndex(prev => (prev > 0 ? prev - 1 : suggestions.length - 1));\r\n        } else if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n            if (activeIndex >= 0) {\r\n                selectItem(suggestions[activeIndex]);\r\n            }\r\n        } else if (e.key === \"Escape\") {\r\n            setIsOpen(false);\r\n        }\r\n    };\r\n\r\n    const selectItem = (item: SearchResultItem) => {\r\n        const q = `${item.lat},${item.lon}`;\r\n        onSelectCity(q);\r\n        setQuery(\"\");\r\n        setIsOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div ref={wrapperRef} className=\"relative z-50 w-full group\">\r\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors pointer-events-none\">\r\n                {isLoading ? <Loader2 size={20} className=\"animate-spin\" /> : <Search size={20} />}\r\n            </div>\r\n\r\n            <input\r\n                type=\"text\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                onFocus={() => { if (suggestions.length > 0) setIsOpen(true) }}\r\n                placeholder=\"Search city...\"\r\n                className=\"w-full bg-slate-800 border border-slate-700 text-slate-100 rounded-2xl py-3.5 pl-12 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all font-medium placeholder:text-slate-500 shadow-sm\"\r\n            />\r\n\r\n            {query && (\r\n                <button\r\n                    onClick={() => { setQuery(\"\"); setIsOpen(false); }}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 p-1\"\r\n                >\r\n                    <X size={16} />\r\n                </button>\r\n            )}\r\n\r\n            {/* Dropdown */}\r\n            {isOpen && (\r\n                <div className=\"absolute top-full left-0 right-0 mt-2 bg-slate-900 rounded-2xl border border-slate-800 shadow-xl shadow-black/50 max-h-[300px] overflow-y-auto no-scrollbar py-2\">\r\n                    {suggestions.length > 0 ? (\r\n                        <ul role=\"listbox\">\r\n                            {suggestions.map((item, idx) => (\r\n                                <li\r\n                                    key={item.id}\r\n                                    role=\"option\"\r\n                                    aria-selected={idx === activeIndex}\r\n                                    className={`px-4 py-3 cursor-pointer flex items-center gap-3 transition-colors ${idx === activeIndex ? \"bg-blue-600/20 text-blue-100\" : \"hover:bg-slate-800/50 text-slate-300\"}`}\r\n                                    onClick={() => selectItem(item)}\r\n                                    onMouseEnter={() => setActiveIndex(idx)}\r\n                                >\r\n                                    <MapPin size={16} className={`shrink-0 ${idx === activeIndex ? \"text-blue-400\" : \"text-slate-600\"}`} />\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"font-medium text-sm\">\r\n                                            {item.name}\r\n                                        </span>\r\n                                        <span className=\"text-xs text-slate-500 opacity-80\">{item.region ? `${item.region}, ` : ''}{item.country}</span>\r\n                                    </div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        !isLoading && query.length >= 2 && (\r\n                            <div className=\"px-4 py-6 text-center text-slate-500 text-sm\">\r\n                                No results found\r\n                            </div>\r\n                        )\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/Sidebar.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { CloudSun, History, MapPin, X, Sun } from \"lucide-react\";\r\nimport { City } from \"../lib/cities\";\r\nimport SearchBox from \"./SearchBox\";\r\n\r\ninterface Props {\r\n    favorites: City[];\r\n    recent: City[];\r\n    onSelectCity: (city: City) => void;\r\n    onSearch: (query: string) => void;\r\n    onRemoveFavorite: (city: City) => void;\r\n}\r\n\r\nexport default function Sidebar({ favorites, recent, onSelectCity, onSearch, onRemoveFavorite }: Props) {\r\n    const [showAllFavorites, setShowAllFavorites] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            <aside className=\"w-full lg:w-[320px] lg:h-screen lg:fixed lg:left-0 lg:top-0 bg-slate-900 border-b lg:border-b-0 lg:border-r border-slate-800 p-6 flex flex-col gap-8 z-20 overflow-visible lg:overflow-y-auto no-scrollbar\">\r\n                {/* Logo */}\r\n                <div className=\"flex items-center gap-3 px-2\">\r\n                    <div className=\"p-2 bg-blue-600 rounded-xl text-white shadow-lg shadow-blue-900/20\">\r\n                        <CloudSun size={24} strokeWidth={2.5} />\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-100 tracking-tight\">Weatherly</h1>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                <SearchBox onSelectCity={onSearch} />\r\n\r\n                {/* Favorites */}\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between px-2 text-sm font-semibold text-slate-400 uppercase tracking-wider\">\r\n                        <span>Favorites</span>\r\n                        {favorites.length > 3 && (\r\n                            <button onClick={() => setShowAllFavorites(true)} className=\"text-blue-400 hover:text-blue-300 text-xs font-bold transition-colors\">\r\n                                View All ({favorites.length})\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {favorites.length === 0 && (\r\n                        <div className=\"text-xs text-slate-600 px-2 italic\">Search and click star to add favorites</div>\r\n                    )}\r\n\r\n                    <div className=\"flex flex-col gap-3\">\r\n                        {favorites.slice(0, 3).map((fav) => (\r\n                            <button\r\n                                key={fav.name}\r\n                                onClick={() => onSelectCity(fav)}\r\n                                className=\"flex items-center justify-between bg-slate-800 focus:bg-slate-700 hover:bg-slate-800/80 hover:border-blue-500/30 p-4 rounded-2xl border border-slate-700 transition-all group text-left shadow-sm\"\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"bg-slate-700 p-2 rounded-full text-yellow-500 group-hover:text-yellow-400 transition-colors\">\r\n                                        <Sun size={16} fill=\"currentColor\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"font-bold text-slate-200 group-hover:text-white transition-colors\">{fav.name}</div>\r\n                                        <div className=\"text-xs text-slate-500 font-medium group-hover:text-slate-400\">{fav.country}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Recent Searches */}\r\n                <div className=\"flex-1 space-y-4\">\r\n                    <div className=\"flex items-center justify-between px-2 text-sm font-semibold text-slate-400 uppercase tracking-wider\">\r\n                        <span>Recent</span>\r\n                        <History size={14} />\r\n                    </div>\r\n\r\n                    {recent.length === 0 && (\r\n                        <div className=\"text-xs text-slate-600 px-2 italic\">No recent searches</div>\r\n                    )}\r\n\r\n                    <ul className=\"space-y-1\">\r\n                        {recent.map((item) => (\r\n                            <li key={item.name}>\r\n                                <button\r\n                                    onClick={() => onSelectCity(item)}\r\n                                    className=\"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:bg-slate-800 hover:text-slate-200 rounded-xl transition-colors text-sm font-medium\"\r\n                                >\r\n                                    <MapPin size={16} className=\"text-slate-600 group-hover:text-slate-400\" />\r\n                                    <span className=\"truncate\">{item.name}, {item.country}</span>\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Footer / Tip */}\r\n                <div className=\"mt-auto pt-6 border-t border-slate-800 px-2 hidden lg:block\">\r\n                    <p className=\"text-xs text-slate-500 leading-relaxed\">\r\n                        <span className=\"font-semibold text-slate-400\">Pro Tip:</span> Press <kbd className=\"font-sans bg-slate-800 px-1.5 py-0.5 rounded border border-slate-700 text-slate-300 shadow-sm\">K</kbd> to search anytime.\r\n                    </p>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* View All Favorites Modal */}\r\n            {showAllFavorites && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-slate-900 rounded-3xl shadow-2xl border border-slate-800 w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\r\n                        <div className=\"flex items-center justify-between p-6 border-b border-slate-800\">\r\n                            <h2 className=\"text-lg font-bold text-slate-100\">All Favorites</h2>\r\n                            <button onClick={() => setShowAllFavorites(false)} className=\"p-2 hover:bg-slate-800 rounded-full text-slate-400\">\r\n                                <X size={20} />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"max-h-[60vh] overflow-y-auto p-4 space-y-2 no-scrollbar\">\r\n                            {favorites.map(fav => (\r\n                                <div key={fav.name} className=\"flex items-center justify-between p-3 rounded-2xl bg-slate-800 hover:bg-slate-700 border border-slate-700/50 transition-colors group\">\r\n                                    <button onClick={() => { onSelectCity(fav); setShowAllFavorites(false); }} className=\"flex-1 text-left font-bold text-slate-200\">\r\n                                        {fav.name}, <span className=\"text-slate-500 font-normal\">{fav.country}</span>\r\n                                    </button>\r\n                                    <button onClick={() => onRemoveFavorite(fav)} className=\"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-full transition-colors\">\r\n                                        <X size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/CurrentWeatherCard.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { Star, Thermometer, Droplets, Wind } from \"lucide-react\";\r\n\r\n// Flexible props to handle both mock (Step 2) and real (Step 3) shapes ideally, \r\n// but we optimize for Step 3 now.\r\ninterface Props {\r\n    data: {\r\n        city: string;\r\n        date: string;\r\n        temp: number;\r\n        condition: string;\r\n        description: string;\r\n        feelsLike: number;\r\n        humidity: number;\r\n        windSpeed: number;\r\n        high: number;\r\n        low: number;\r\n    };\r\n    iconUrl: string; // New: Image URL from API\r\n    isFavorite: boolean;\r\n    onToggleFavorite: () => void;\r\n}\r\n\r\nexport default function CurrentWeatherCard({ data, iconUrl, isFavorite, onToggleFavorite }: Props) {\r\n\r\n    return (\r\n        <div className=\"col-span-12 xl:col-span-8 bg-blue-600 text-white rounded-[2rem] p-0 relative overflow-hidden flex flex-col h-[432px] transition-all duration-500\">\r\n\r\n            {/* Background Decor (Static fallback) */}\r\n            <div className=\"absolute top-0 right-0 p-12 opacity-5 pointer-events-none\">\r\n                {/* Could use <img src={iconUrl} /> here huge but simplified */}\r\n            </div>\r\n\r\n            {/* Top Section: Matches height of first 3 rows of grid (3 * 96 + 2 * 16 = 320px) */}\r\n            {/* We subtract margins/padding if needed, but here we set internal height explicitly. */}\r\n            <div className=\"h-[320px] p-8 md:p-10 flex flex-col justify-between relative z-10\">\r\n                {/* Header */}\r\n                <div className=\"flex flex-col md:flex-row md:items-start justify-between gap-4\">\r\n                    <div className=\"flex items-start gap-4\">\r\n                        <div>\r\n                            <h2 className=\"text-4xl md:text-6xl font-black tracking-tight mb-2 flex items-center gap-3\">\r\n                                {data.city}\r\n                            </h2>\r\n                            <p className=\"text-blue-100 text-xl font-medium\">{data.date}</p>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={onToggleFavorite}\r\n                            className=\"mt-2 p-2 rounded-full hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-white/40\"\r\n                            aria-label={isFavorite ? \"Remove from favorites\" : \"Add to favorites\"}\r\n                        >\r\n                            <Star\r\n                                size={32}\r\n                                className={`transition-all ${isFavorite ? \"fill-yellow-400 text-yellow-400\" : \"text-blue-200 hover:text-white\"}`}\r\n                            />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full text-sm font-medium border border-white/20 self-start\">\r\n                        Live Updates\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Stats */}\r\n                <div className=\"flex flex-col md:flex-row items-center md:items-end gap-6 md:gap-12 animate-in fade-in zoom-in duration-500\">\r\n                    <div className=\"text-7xl md:text-9xl font-bold tracking-tighter\">\r\n                        {data.temp}°\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-1 mb-4\">\r\n                        <div className=\"flex items-center gap-3 text-2xl md:text-3xl font-medium capitalize\">\r\n                            <img src={`https:${iconUrl}`} alt={data.condition} className=\"w-16 h-16 object-contain\" />\r\n                            {data.condition}\r\n                        </div>\r\n                        <div className=\"text-blue-100/90 text-lg\">\r\n                            {data.description}\r\n                        </div>\r\n                        <div className=\"text-blue-100 mt-1 font-medium\">\r\n                            H: {data.high}°  &bull;  L: {data.low}°\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Divider Line matches the grid gap between row 3 and 4 visually if container heights align */}\r\n\r\n            {/* Footer Section: Fills the rest (approx 144px to match last row + padding) */}\r\n            <div className=\"flex-1 relative z-10 grid grid-cols-3 gap-4 border-t border-white/20 px-8 md:px-10 items-center bg-blue-600/50\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2.5 bg-white/10 rounded-full\">\r\n                        <Thermometer size={20} className=\"text-blue-100\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-xs text-blue-200 uppercase font-semibold\">Feels Like</p>\r\n                        <p className=\"font-bold text-lg\">{data.feelsLike}°</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2.5 bg-white/10 rounded-full\">\r\n                        <Droplets size={20} className=\"text-blue-100\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-xs text-blue-200 uppercase font-semibold\">Humidity</p>\r\n                        <p className=\"font-bold text-lg\">{data.humidity}%</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2.5 bg-white/10 rounded-full\">\r\n                        <Wind size={20} className=\"text-blue-100\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-xs text-blue-200 uppercase font-semibold\">Wind</p>\r\n                        <p className=\"font-bold text-lg\">{data.windSpeed} <span className=\"text-sm font-normal\">kph</span></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;;;AAsBe,SAAS,mBAAmB,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,gBAAgB,EAAS;IAE7F,qBACI,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAI,WAAU;;;;;;0BAMf,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;;0DACG,8OAAC;gDAAG,WAAU;0DACT,KAAK,IAAI;;;;;;0DAEd,8OAAC;gDAAE,WAAU;0DAAqC,KAAK,IAAI;;;;;;;;;;;;kDAG/D,8OAAC;wCACG,SAAS;wCACT,WAAU;wCACV,cAAY,aAAa,0BAA0B;kDAEnD,cAAA,8OAAC,0MAAI;4CACD,MAAM;4CACN,WAAW,CAAC,eAAe,EAAE,aAAa,oCAAoC,kCAAkC;;;;;;;;;;;;;;;;;0CAK5H,8OAAC;gCAAI,WAAU;0CAA4G;;;;;;;;;;;;kCAM/H,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;oCACV,KAAK,IAAI;oCAAC;;;;;;;0CAEf,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAI,KAAK,CAAC,MAAM,EAAE,SAAS;gDAAE,KAAK,KAAK,SAAS;gDAAE,WAAU;;;;;;4CAC5D,KAAK,SAAS;;;;;;;kDAEnB,8OAAC;wCAAI,WAAU;kDACV,KAAK,WAAW;;;;;;kDAErB,8OAAC;wCAAI,WAAU;;4CAAiC;4CACxC,KAAK,IAAI;4CAAC;4CAAe,KAAK,GAAG;4CAAC;;;;;;;;;;;;;;;;;;;;;;;;;0BAStD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,+NAAW;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAErC,8OAAC;;kDACG,8OAAC;wCAAE,WAAU;kDAAgD;;;;;;kDAC7D,8OAAC;wCAAE,WAAU;;4CAAqB,KAAK,SAAS;4CAAC;;;;;;;;;;;;;;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,sNAAQ;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAElC,8OAAC;;kDACG,8OAAC;wCAAE,WAAU;kDAAgD;;;;;;kDAC7D,8OAAC;wCAAE,WAAU;;4CAAqB,KAAK,QAAQ;4CAAC;;;;;;;;;;;;;;;;;;;kCAGxD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,0MAAI;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAE9B,8OAAC;;kDACG,8OAAC;wCAAE,WAAU;kDAAgD;;;;;;kDAC7D,8OAAC;wCAAE,WAAU;;4CAAqB,KAAK,SAAS;4CAAC;0DAAC,8OAAC;gDAAK,WAAU;0DAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhH"}},
    {"offset": {"line": 998, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/HourlyForecast.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UIHourly } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    data: UIHourly[];\r\n}\r\n\r\nexport default function HourlyForecast({ data }: Props) {\r\n    return (\r\n        <div className=\"col-span-12\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-xl font-bold text-slate-100\">Hourly Forecast</h3>\r\n            </div>\r\n\r\n            <div className=\"flex overflow-x-auto pb-6 -mx-6 px-6 md:mx-0 md:px-0 gap-4 no-scrollbar\">\r\n                {data.map((hour, idx) => {\r\n                    return (\r\n                        <div\r\n                            key={idx}\r\n                            className={`flex-shrink-0 w-32 p-6 rounded-3xl border flex flex-col items-center gap-4 transition-all hover:-translate-y-1 hover:shadow-lg ${hour.isNow\r\n                                    ? \"bg-blue-600 text-white border-blue-500 shadow-lg shadow-blue-500/20\"\r\n                                    : \"bg-slate-900 border-slate-800 hover:border-slate-700 text-slate-300\"\r\n                                }`}\r\n                        >\r\n                            <span className={`text-sm font-medium ${hour.isNow ? \"text-blue-100\" : \"text-slate-500\"}`}>{hour.time}</span>\r\n                            <img src={`https:${hour.conditionIcon}`} alt={hour.conditionText} className=\"w-10 h-10 object-contain opacity-90\" />\r\n                            <span className=\"text-xl font-bold\">{hour.temp_c}°</span>\r\n                            {hour.chance_of_rain > 20 && (\r\n                                <span className={`text-xs font-bold ${hour.isNow ? \"text-blue-200\" : \"text-blue-400\"}`}>{hour.chance_of_rain}% Rain</span>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAOe,SAAS,eAAe,EAAE,IAAI,EAAS;IAClD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAGrD,8OAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,MAAM;oBACb,qBACI,8OAAC;wBAEG,WAAW,CAAC,+HAA+H,EAAE,KAAK,KAAK,GAC7I,wEACA,uEACJ;;0CAEN,8OAAC;gCAAK,WAAW,CAAC,oBAAoB,EAAE,KAAK,KAAK,GAAG,kBAAkB,kBAAkB;0CAAG,KAAK,IAAI;;;;;;0CACrG,8OAAC;gCAAI,KAAK,CAAC,MAAM,EAAE,KAAK,aAAa,EAAE;gCAAE,KAAK,KAAK,aAAa;gCAAE,WAAU;;;;;;0CAC5E,8OAAC;gCAAK,WAAU;;oCAAqB,KAAK,MAAM;oCAAC;;;;;;;4BAChD,KAAK,cAAc,GAAG,oBACnB,8OAAC;gCAAK,WAAW,CAAC,kBAAkB,EAAE,KAAK,KAAK,GAAG,kBAAkB,iBAAiB;;oCAAG,KAAK,cAAc;oCAAC;;;;;;;;uBAV5G;;;;;gBAcjB;;;;;;;;;;;;AAIhB"}},
    {"offset": {"line": 1091, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/DailyForecast.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { Umbrella } from \"lucide-react\";\r\nimport { UIDaily } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    data: UIDaily[];\r\n}\r\n\r\nexport default function DailyForecast({ data }: Props) {\r\n    return (\r\n        <div className=\"glass-panel rounded-[2rem] p-8 flex flex-col\">\r\n            <h3 className=\"text-xl font-bold text-slate-100 mb-6\">7-Day Forecast</h3>\r\n            <div className=\"flex flex-col gap-1 flex-1\">\r\n                {data.map((day, idx) => {\r\n                    return (\r\n                        <div key={idx} className=\"group flex items-center justify-between py-4 border-b border-slate-800 last:border-0 hover:bg-slate-800/50 px-2 rounded-xl transition-colors cursor-default\">\r\n                            <div className=\"w-16\">\r\n                                <span className={`font-medium ${idx === 0 ? \"text-blue-400 font-bold\" : \"text-slate-400\"}`}>{day.dayName}</span>\r\n                                {day.isMock && <span className=\"block text-[9px] text-slate-600 uppercase tracking-tighter\">Est</span>}\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-2 flex-1 pl-4\">\r\n                                <img src={`https:${day.conditionIcon}`} className=\"w-8 h-8 object-contain opacity-80 group-hover:opacity-100 transition-opacity\" alt={day.conditionText} />\r\n                                <span className=\"text-sm text-slate-400 group-hover:text-slate-200 font-medium hidden sm:block w-24 truncate transition-colors\" title={day.conditionText}>{day.conditionText}</span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-6\">\r\n                                <div className=\"flex items-center gap-1 w-16 text-xs font-semibold text-blue-300 bg-blue-500/10 px-2 py-1 rounded-full justify-center\">\r\n                                    <Umbrella size={12} />\r\n                                    {day.chance_of_rain}%\r\n                                </div>\r\n                                <div className=\"flex gap-4 w-24 justify-end text-sm\">\r\n                                    <span className=\"font-bold text-slate-200\">{day.max_c}°</span>\r\n                                    <span className=\"font-medium text-slate-600\">{day.min_c}°</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            {data.some(d => d.isMock) && (\r\n                <div className=\"mt-4 pt-4 border-t border-slate-800 text-center\">\r\n                    <p className=\"text-[10px] text-slate-600\">\r\n                        * Extended forecast estimated.\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,cAAc,EAAE,IAAI,EAAS;IACjD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,8OAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,KAAK;oBACZ,qBACI,8OAAC;wBAAc,WAAU;;0CACrB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAK,WAAW,CAAC,YAAY,EAAE,QAAQ,IAAI,4BAA4B,kBAAkB;kDAAG,IAAI,OAAO;;;;;;oCACvG,IAAI,MAAM,kBAAI,8OAAC;wCAAK,WAAU;kDAA6D;;;;;;;;;;;;0CAGhG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,KAAK,CAAC,MAAM,EAAE,IAAI,aAAa,EAAE;wCAAE,WAAU;wCAA+E,KAAK,IAAI,aAAa;;;;;;kDACvJ,8OAAC;wCAAK,WAAU;wCAAgH,OAAO,IAAI,aAAa;kDAAG,IAAI,aAAa;;;;;;;;;;;;0CAGhL,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,sNAAQ;gDAAC,MAAM;;;;;;4CACf,IAAI,cAAc;4CAAC;;;;;;;kDAExB,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;;oDAA4B,IAAI,KAAK;oDAAC;;;;;;;0DACtD,8OAAC;gDAAK,WAAU;;oDAA8B,IAAI,KAAK;oDAAC;;;;;;;;;;;;;;;;;;;;uBAlB1D;;;;;gBAuBlB;;;;;;YAEH,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,MAAM,mBACpB,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;;;;;;AAO9D"}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/components/DetailsGrid.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UIDetails } from \"../lib/types\";\r\nimport { Sunrise, Sunset, Sun, Droplets, Wind, Thermometer, Gauge, Eye } from \"lucide-react\";\r\n\r\ninterface Props {\r\n    data: UIDetails;\r\n}\r\n\r\nexport default function DetailsGrid({ data }: Props) {\r\n    const items = [\r\n        { label: \"Sunrise\", value: data.sunrise, icon: Sunrise },\r\n        { label: \"Sunset\", value: data.sunset, icon: Sunset },\r\n        { label: \"UV Index\", value: data.uv, icon: Sun },\r\n        { label: \"Humidity\", value: `${data.humidity}%`, icon: Droplets },\r\n        { label: \"Wind\", value: `${data.wind_kph} kph`, icon: Wind },\r\n        { label: \"Feels Like\", value: `${data.feelsLike_c}°`, icon: Thermometer },\r\n        { label: \"Pressure\", value: `${data.pressure_mb} hPa`, icon: Gauge },\r\n        { label: \"Visibility\", value: `${data.visibility_km} km`, icon: Eye },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n            {items.map((detail, idx) => {\r\n                const Icon = detail.icon;\r\n                return (\r\n                    <div key={idx} className=\"glass-panel p-5 rounded-3xl flex flex-col justify-between gap-2 hover:bg-slate-800/80 transition-colors h-24\">\r\n                        <div className=\"flex items-center justify-between text-slate-500\">\r\n                            <span className=\"text-xs font-bold uppercase tracking-wider\">{detail.label}</span>\r\n                            <Icon size={18} className=\"text-slate-400\" />\r\n                        </div>\r\n                        <div className=\"text-xl font-bold text-slate-200\">{detail.value}</div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAMe,SAAS,YAAY,EAAE,IAAI,EAAS;IAC/C,MAAM,QAAQ;QACV;YAAE,OAAO;YAAW,OAAO,KAAK,OAAO;YAAE,MAAM,mNAAO;QAAC;QACvD;YAAE,OAAO;YAAU,OAAO,KAAK,MAAM;YAAE,MAAM,gNAAM;QAAC;QACpD;YAAE,OAAO;YAAY,OAAO,KAAK,EAAE;YAAE,MAAM,uMAAG;QAAC;QAC/C;YAAE,OAAO;YAAY,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YAAE,MAAM,sNAAQ;QAAC;QAChE;YAAE,OAAO;YAAQ,OAAO,GAAG,KAAK,QAAQ,CAAC,IAAI,CAAC;YAAE,MAAM,0MAAI;QAAC;QAC3D;YAAE,OAAO;YAAc,OAAO,GAAG,KAAK,WAAW,CAAC,CAAC,CAAC;YAAE,MAAM,+NAAW;QAAC;QACxE;YAAE,OAAO;YAAY,OAAO,GAAG,KAAK,WAAW,CAAC,IAAI,CAAC;YAAE,MAAM,6MAAK;QAAC;QACnE;YAAE,OAAO;YAAc,OAAO,GAAG,KAAK,aAAa,CAAC,GAAG,CAAC;YAAE,MAAM,uMAAG;QAAC;KACvE;IAED,qBACI,8OAAC;QAAI,WAAU;kBACV,MAAM,GAAG,CAAC,CAAC,QAAQ;YAChB,MAAM,OAAO,OAAO,IAAI;YACxB,qBACI,8OAAC;gBAAc,WAAU;;kCACrB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;0CAA8C,OAAO,KAAK;;;;;;0CAC1E,8OAAC;gCAAK,MAAM;gCAAI,WAAU;;;;;;;;;;;;kCAE9B,8OAAC;wBAAI,WAAU;kCAAoC,OAAO,KAAK;;;;;;;eALzD;;;;;QAQlB;;;;;;AAGZ"}},
    {"offset": {"line": 1380, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/lib/storage.ts"],"sourcesContent":["import { City } from \"./cities\";\r\n\r\nconst STORAGE_KEYS = {\r\n    RECENT: 'weatherly_recent',\r\n    FAVORITES: 'weatherly_favorites',\r\n    LAST_CITY: 'weatherly_last_active' // To resume where user left off\r\n};\r\n\r\nexport const getRecentSearches = (): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.RECENT);\r\n        return item ? JSON.parse(item) : [];\r\n    } catch (e) { return []; }\r\n};\r\n\r\nexport const addRecentSearch = (city: City) => {\r\n    if (typeof window === 'undefined') return;\r\n    const recent = getRecentSearches();\r\n\r\n    // Remove duplicate if exists, add to front\r\n    const filtered = recent.filter(c => c.name !== city.name);\r\n    const updated = [city, ...filtered].slice(0, 6); // Keep last 6\r\n\r\n    localStorage.setItem(STORAGE_KEYS.RECENT, JSON.stringify(updated));\r\n    return updated;\r\n};\r\n\r\nexport const getFavorites = (): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.FAVORITES);\r\n        return item ? JSON.parse(item) : [];\r\n    } catch (e) { return []; }\r\n};\r\n\r\nexport const toggleFavorite = (city: City): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    const favs = getFavorites();\r\n    const exists = favs.find(c => c.name === city.name);\r\n\r\n    let updated;\r\n    if (exists) {\r\n        updated = favs.filter(c => c.name !== city.name);\r\n    } else {\r\n        updated = [city, ...favs];\r\n    }\r\n\r\n    localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(updated));\r\n    return updated;\r\n};\r\n\r\nexport const saveLastCity = (city: City) => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.setItem(STORAGE_KEYS.LAST_CITY, JSON.stringify(city));\r\n    }\r\n}\r\n\r\nexport const getLastCity = (): City | null => {\r\n    if (typeof window === 'undefined') return null;\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.LAST_CITY);\r\n        return item ? JSON.parse(item) : null;\r\n    } catch { return null }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,MAAM,eAAe;IACjB,QAAQ;IACR,WAAW;IACX,WAAW,wBAAwB,gCAAgC;AACvE;AAEO,MAAM,oBAAoB;IAC7B,wCAAmC,OAAO,EAAE;;;AAKhD;AAEO,MAAM,kBAAkB,CAAC;IAC5B,wCAAmC;;;IACnC,MAAM;IAEN,2CAA2C;IAC3C,MAAM;IACN,MAAM,qBAA2C,cAAc;AAInE;AAEO,MAAM,eAAe;IACxB,wCAAmC,OAAO,EAAE;;;AAKhD;AAEO,MAAM,iBAAiB,CAAC;IAC3B,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;IACN,MAAM;IAEN,IAAI;AASR;AAEO,MAAM,eAAe,CAAC;IACzB;;AAGJ;AAEO,MAAM,cAAc;IACvB,wCAAmC,OAAO;;;AAK9C"}},
    {"offset": {"line": 1439, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wbr15/OneDrive/Desktop/weather%20app/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { CloudSun, Menu, Loader2 } from \"lucide-react\";\nimport Sidebar from \"./components/Sidebar\";\nimport CurrentWeatherCard from \"./components/CurrentWeatherCard\";\nimport HourlyForecast from \"./components/HourlyForecast\";\nimport DailyForecast from \"./components/DailyForecast\";\nimport DetailsGrid from \"./components/DetailsGrid\";\nimport { UIWeather, SearchResultItem } from \"./lib/types\";\nimport {\n  getRecentSearches, addRecentSearch,\n  getFavorites, toggleFavorite,\n  getLastCity, saveLastCity\n} from \"./lib/storage\";\nimport { City } from \"./lib/cities\"; // Keep for type compat if needed, or refactor storage to use new types\n\n// Adapter for storage compatibility (Old City type vs API)\n// Ideally we'd migrate storage to use a unified type, but for now we map it on the fly.\nfunction toCity(ui: UIWeather): City {\n  return {\n    name: ui.location.name,\n    country: ui.location.country,\n    lat: ui.location.lat,\n    lon: ui.location.lon\n  };\n}\n\nexport default function Home() {\n  const [weather, setWeather] = useState<UIWeather | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const [favorites, setFavorites] = useState<City[]>([]);\n  const [recent, setRecent] = useState<City[]>([]);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  // Initial Load\n  useEffect(() => {\n    setFavorites(getFavorites());\n    setRecent(getRecentSearches());\n\n    // Check for last city\n    const last = getLastCity();\n    const initialQuery = last ? `${last.lat},${last.lon}` : \"Helsinki\";\n\n    fetchWeather(initialQuery);\n  }, []);\n\n  const fetchWeather = async (query: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(`/api/weather?q=${encodeURIComponent(query)}`);\n      if (!res.ok) throw new Error(\"Failed to fetch weather\");\n      const data: UIWeather = await res.json();\n      setWeather(data);\n\n      // Save valid load as \"last city\"\n      saveLastCity(toCity(data));\n\n    } catch (err) {\n      setError(\"Could not load weather data. Please try again.\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSelectCity = (query: string) => {\n    fetchWeather(query);\n    // Recent search addition happens after successful load usually, but we can do optimistic text link here?\n    // Actually, API returns full location info, so best to add to recent AFTER fetch succeeds.\n    // However, SearchBox passes raw query. Wait for weather load to add to recent?\n    // Let's add inside the useEffect or just assume it works.\n    setIsMobileMenuOpen(false);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  // Add to recent when weather loads successfully\n  useEffect(() => {\n    if (weather) {\n      const c = toCity(weather);\n      // Only add if it's different from top recent? Or just re-add.\n      const updated = addRecentSearch(c);\n      if (updated) setRecent(updated);\n    }\n  }, [weather]);\n\n  const handleToggleFavorite = () => {\n    if (!weather) return;\n    const c = toCity(weather);\n    const updated = toggleFavorite(c);\n    setFavorites(updated);\n  };\n\n  const isCurrentFavorite = weather ? favorites.some(c => c.name === weather.location.name) : false;\n\n  // Render Helpers\n  const renderContent = () => {\n    if (loading && !weather) {\n      return (\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] gap-4\">\n          <Loader2 size={48} className=\"text-blue-500 animate-spin\" />\n          <p className=\"text-slate-400 font-medium\">Loading forecast...</p>\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] gap-4\">\n          <p className=\"text-red-500 font-bold text-lg\">{error}</p>\n          <button onClick={() => fetchWeather(\"Helsinki\")} className=\"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700\">Try Default</button>\n        </div>\n      );\n    }\n\n    if (!weather) return null;\n\n    // Map UIWeather to components\n    // CurrentWeatherCard expects slightly different props?\n    // Check CurrentWeatherCard props signature. It expects 'CurrentWeather' from 'lib/weatherMock'.\n    // We need to update components to accept new types or map them here.\n    // To save file edits, let's map on the fly to match the component props if possible OR preferably update components to new types.\n    // Since we are upgrading, let's cast 'weather' to expected props.\n\n    const currentProps = {\n      city: weather.location.name,\n      country: weather.location.country,\n      date: new Date(weather.location.localtime).toLocaleDateString(\"en-GB\", { weekday: 'long', day: 'numeric', month: 'short' }),\n      temp: weather.current.temp_c,\n      condition: weather.current.conditionText as any, // Component expects strict union, loosen it or fix component\n      description: weather.current.conditionText,\n      feelsLike: weather.current.feelslike_c,\n      humidity: weather.current.humidity,\n      windSpeed: weather.current.wind_kph,\n      high: weather.daily[0]?.max_c || 0,\n      low: weather.daily[0]?.min_c || 0,\n      icon: Loader2 // Dummy, component handles icon rendering? No, component expects explicit icon component.\n      // Wait, component rendering needs dynamic icon.\n      // The API gives us icon URL \"//cdn.....\". \n      // We need to update CurrentWeatherCard to accept image URL instead of Lucide Icon component.\n    };\n\n    return (\n      <div className=\"grid grid-cols-12 gap-8 animate-in fade-in duration-500\">\n        {/* Left Column */}\n        <div className=\"col-span-12 xl:col-span-8 flex flex-col gap-8\">\n          {/* \n                    We need to refactor CurrentWeatherCard to accept new data shape \n                    Wait, I should update the component files to use keys from the new types.\n                    For now, I'll pass ANY to skip strict checking and assume I fix components in next step.\n                 */}\n          <CurrentWeatherCard\n            data={currentProps as any}\n            isFavorite={isCurrentFavorite}\n            onToggleFavorite={handleToggleFavorite}\n            iconUrl={weather.current.conditionIcon} // Pass new prop\n          />\n          <HourlyForecast data={weather.hourly} />\n          <DailyForecast data={weather.daily} />\n        </div>\n\n        {/* Right Column */}\n        <div className=\"col-span-12 xl:col-span-4 flex flex-col gap-8\">\n          <DetailsGrid data={weather.details as any} />\n          {weather.extraDetails && <ExtraDetailsGrid data={weather.extraDetails} />}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-blue-500/30 selection:text-blue-100\">\n\n      <div className={`${isMobileMenuOpen ? 'fixed inset-0 z-50 bg-slate-950 overflow-y-auto' : 'hidden lg:block'}`}>\n        <div className=\"lg:hidden p-4 flex justify-end\">\n          <button onClick={() => setIsMobileMenuOpen(false)} className=\"p-2 bg-slate-800 rounded-full text-slate-300\"><Menu /></button>\n        </div>\n        <Sidebar\n          favorites={favorites}\n          recent={recent}\n          onSearch={handleSelectCity}\n          onSelectCity={(city) => {\n            handleSelectCity(`${city.lat},${city.lon}`);\n            setIsMobileMenuOpen(false);\n          }}\n          onRemoveFavorite={(c) => {\n            const updated = toggleFavorite(c);\n            setFavorites(updated);\n          }}\n        />\n      </div>\n\n      {/* Mobile Header */}\n      <div className=\"lg:hidden flex items-center justify-between p-4 bg-slate-900 border-b border-slate-800 sticky top-0 z-40\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"p-1.5 bg-blue-600 rounded-lg text-white\">\n            <CloudSun size={20} />\n          </div>\n          <span className=\"font-bold text-lg text-slate-100\">Weatherly</span>\n        </div>\n        <button onClick={() => setIsMobileMenuOpen(true)} className=\"p-2 bg-slate-800 rounded-full shadow-sm border border-slate-700 text-slate-300\">\n          <Menu size={20} />\n        </button>\n      </div>\n\n      {/* Main Content Area */}\n      <main className=\"lg:ml-[320px] min-h-screen p-4 md:p-8 lg:p-12 max-w-[1600px] mx-auto flex flex-col\">\n        {renderContent()}\n\n        {/* Credit */}\n        <div className=\"mt-auto pt-8 text-center md:text-right\">\n          <a href=\"https://www.weatherapi.com/\" title=\"Free Weather API\" target=\"_blank\" rel=\"noreferrer\" className=\"text-[10px] text-slate-400 hover:text-slate-500 uppercase tracking-widest font-bold\">\n            Powered by WeatherAPI.com\n          </a>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}