{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/SearchBox.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { Search, MapPin, X, Loader2 } from \"lucide-react\";\r\nimport { SearchResultItem } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    onSelectCity: (query: string) => void;\r\n}\r\n\r\n// Debounce Helper\r\nfunction useDebounce<T>(value: T, delay: number): T {\r\n    const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => setDebouncedValue(value), delay);\r\n        return () => clearTimeout(handler);\r\n    }, [value, delay]);\r\n    return debouncedValue;\r\n}\r\n\r\nexport default function SearchBox({ onSelectCity }: Props) {\r\n    const [query, setQuery] = useState(\"\");\r\n    const debouncedQuery = useDebounce(query, 300);\r\n\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [suggestions, setSuggestions] = useState<SearchResultItem[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [activeIndex, setActiveIndex] = useState(-1);\r\n\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n    const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n    // Fetch Logic\r\n    useEffect(() => {\r\n        if (!debouncedQuery || debouncedQuery.length < 2) {\r\n            setSuggestions([]);\r\n            return;\r\n        }\r\n\r\n        if (abortControllerRef.current) {\r\n            abortControllerRef.current.abort();\r\n        }\r\n        const controller = new AbortController();\r\n        abortControllerRef.current = controller;\r\n\r\n        setIsLoading(true);\r\n\r\n        fetch(`/api/search?q=${encodeURIComponent(debouncedQuery)}`, { signal: controller.signal })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.results) {\r\n                    setSuggestions(data.results);\r\n                    setIsOpen(true);\r\n                    setActiveIndex(-1);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err.name !== 'AbortError') console.error(err);\r\n            })\r\n            .finally(() => {\r\n                setIsLoading(false);\r\n            });\r\n\r\n    }, [debouncedQuery]);\r\n\r\n    // Click Outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    // Keyboard Nav\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (!isOpen || suggestions.length === 0) return;\r\n\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            setActiveIndex(prev => (prev < suggestions.length - 1 ? prev + 1 : 0));\r\n        } else if (e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            setActiveIndex(prev => (prev > 0 ? prev - 1 : suggestions.length - 1));\r\n        } else if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n            if (activeIndex >= 0) {\r\n                selectItem(suggestions[activeIndex]);\r\n            }\r\n        } else if (e.key === \"Escape\") {\r\n            setIsOpen(false);\r\n        }\r\n    };\r\n\r\n    const selectItem = (item: SearchResultItem) => {\r\n        const q = `${item.lat},${item.lon}`;\r\n        onSelectCity(q);\r\n        setQuery(\"\");\r\n        setIsOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div ref={wrapperRef} className=\"relative z-50 w-full group\">\r\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-slate-800 transition-colors pointer-events-none\">\r\n                {isLoading ? <Loader2 size={20} className=\"animate-spin\" /> : <Search size={20} />}\r\n            </div>\r\n\r\n            <input\r\n                type=\"text\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                onFocus={() => setIsOpen(true)}\r\n                placeholder=\"Search for cities...\" // Changed placeholder text\r\n                className=\"w-full bg-slate-100 border border-slate-200 text-slate-900 rounded-2xl py-2.5 pl-12 pr-10 focus:outline-none focus:ring-2 focus:ring-slate-400/20 focus:border-slate-400 transition-all font-medium placeholder:text-slate-400 shadow-sm focus:bg-white\"\r\n            />\r\n\r\n            {query && (\r\n                <button\r\n                    onClick={() => { setQuery(\"\"); setSuggestions([]); }}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded-full transition-colors\"\r\n                >\r\n                    <X size={16} />\r\n                </button>\r\n            )}\r\n\r\n            {/* Dropdown Results */}\r\n            {isOpen && (\r\n                <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl border border-slate-200 shadow-xl shadow-slate-200/50 max-h-[300px] overflow-y-auto no-scrollbar py-2\">\r\n                    {suggestions.length > 0 ? (\r\n                        <ul>\r\n                            {suggestions.map((item, index) => (\r\n                                <li key={item.id}>\r\n                                    <button\r\n                                        onClick={() => selectItem(item)}\r\n                                        className={`w-full text-left px-5 py-3 flex flex-col transition-colors ${index === activeIndex ? \"bg-slate-100\" : \"hover:bg-slate-50\"\r\n                                            }`}\r\n                                        onMouseEnter={() => setActiveIndex(index)}\r\n                                    >\r\n                                        <span className={`font-bold text-sm ${index === activeIndex ? \"text-slate-900\" : \"text-slate-900\"}`}>\r\n                                            {item.name}\r\n                                        </span>\r\n                                        <span className={`text-xs ${index === activeIndex ? \"text-slate-600\" : \"text-slate-500\"}`}>\r\n                                            {item.region ? `${item.region}, ` : \"\"}{item.country}\r\n                                        </span>\r\n                                    </button>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        query.length > 2 && !isLoading && (\r\n                            <div className=\"p-4 text-center text-slate-400 text-sm\">\r\n                                No locations found.\r\n                            </div>\r\n                        )\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/Sidebar.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { CloudSun, History, MapPin, X, Sun, Trash2 } from \"lucide-react\";\r\nimport { City } from \"../lib/cities\";\r\nimport SearchBox from \"./SearchBox\";\r\n\r\ninterface Props {\r\n    favorites: City[];\r\n    recent: City[];\r\n    onSelectCity: (city: City) => void;\r\n    onSearch: (query: string) => void;\r\n    onRemoveFavorite: (city: City) => void;\r\n    onRemoveRecent: (city: City) => void;\r\n    unit: 'C' | 'F';\r\n    setUnit: (unit: 'C' | 'F') => void;\r\n}\r\n\r\nexport default function Sidebar({ favorites, recent, onSelectCity, onSearch, onRemoveFavorite, onRemoveRecent, unit, setUnit }: Props) {\r\n    const [showAllFavorites, setShowAllFavorites] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            <aside className=\"w-full lg:w-[320px] lg:h-screen lg:fixed lg:left-0 lg:top-0 bg-white border-b lg:border-b-0 lg:border-r border-slate-200 p-6 flex flex-col gap-8 z-20 overflow-visible lg:overflow-y-auto no-scrollbar shadow-sm lg:shadow-none\">\r\n                {/* Logo */}\r\n                <div className=\"flex items-center gap-3 px-2\">\r\n                    <div className=\"p-2 bg-slate-500 rounded-xl text-white shadow-lg shadow-slate-200/20\">\r\n                        <CloudSun size={24} strokeWidth={2.5} />\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-semibold text-slate-900 tracking-tight\">Weatherly</h1>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                <SearchBox onSelectCity={onSearch} />\r\n\r\n                {/* Unit Toggle */}\r\n                <div className=\"bg-slate-100/80 rounded-lg p-1 flex gap-1 shadow-inner border border-slate-200/50 self-start w-fit min-w-[110px]\">\r\n                    <button\r\n                        onClick={() => setUnit('C')}\r\n                        className={`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 flex-1 ${unit === 'C' ? 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\r\n                    >\r\n                        °C\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setUnit('F')}\r\n                        className={`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 flex-1 ${unit === 'F' ? 'bg-white text-slate-900 shadow-sm ring-1 ring-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\r\n                    >\r\n                        °F\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Favorites */}\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between px-2 text-sm font-semibold text-slate-400 uppercase tracking-wider\">\r\n                        <span>Favorites</span>\r\n                        {favorites.length > 3 && (\r\n                            <button onClick={() => setShowAllFavorites(true)} className=\"text-slate-600 hover:text-slate-900 text-sm font-medium transition-colors\">\r\n                                View All ({favorites.length})\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {favorites.length === 0 && (\r\n                        <div className=\"text-xs text-slate-500 px-2 italic\">Search and click star to add favorites</div>\r\n                    )}\r\n\r\n                    <div className=\"flex flex-col gap-3\">\r\n                        {favorites.slice(0, 3).map((fav) => (\r\n                            <div\r\n                                key={fav.name}\r\n                                onClick={() => onSelectCity(fav)}\r\n                                className=\"relative flex items-center justify-between bg-slate-50 hover:bg-white hover:border-blue-500/50 px-4 py-1.5 rounded-2xl border border-slate-200 transition-all group cursor-pointer shadow-sm hover:shadow-md\"\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"bg-white border border-slate-200 p-2 rounded-full text-yellow-500 group-hover:text-yellow-400 transition-colors shadow-sm\">\r\n                                        <Sun size={16} fill=\"currentColor\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-lg font-semibold text-slate-900 group-hover:text-slate-800 transition-colors\">{fav.name}</div>\r\n                                        <div className=\"text-base text-slate-500 font-medium group-hover:text-slate-600\">{fav.country}</div>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        onRemoveFavorite(fav);\r\n                                    }}\r\n                                    className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100\"\r\n                                    title=\"Remove from favorites\"\r\n                                >\r\n                                    <Trash2 size={16} />\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Recent Searches */}\r\n                <div className=\"flex-1 space-y-4\">\r\n                    <div className=\"flex items-center justify-between px-2 text-sm font-semibold text-slate-400 uppercase tracking-wider\">\r\n                        <span>Recent</span>\r\n                        <History size={14} />\r\n                    </div>\r\n\r\n                    {recent.length === 0 && (\r\n                        <div className=\"text-xs text-slate-500 px-2 italic\">No recent searches</div>\r\n                    )}\r\n\r\n                    <ul className=\"space-y-1\">\r\n                        {recent.map((item) => (\r\n                            <li key={item.name} className=\"group relative flex items-center\">\r\n                                <button\r\n                                    onClick={() => onSelectCity(item)}\r\n                                    className=\"w-full flex items-center gap-3 px-4 py-1 text-slate-500 hover:bg-slate-50 hover:text-slate-900 rounded-xl transition-colors text-base font-medium\"\r\n                                >\r\n                                    <MapPin size={16} className=\"text-slate-400 group-hover:text-slate-600\" />\r\n                                    <span className=\"truncate flex-1 text-left\">{item.name}, {item.country}</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        onRemoveRecent(item);\r\n                                    }}\r\n                                    className=\"absolute right-2 p-1.5 text-slate-400 hover:text-red-500 hover:bg-slate-100 rounded-lg transition-all opacity-0 group-hover:opacity-100\"\r\n                                    title=\"Remove from history\"\r\n                                >\r\n                                    <Trash2 size={14} />\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Footer / Tip */}\r\n                <div className=\"mt-auto pt-6 border-t border-slate-200 px-2 hidden lg:block\">\r\n                    <p className=\"text-xs text-slate-500 leading-relaxed\">\r\n                        <span className=\"font-semibold text-slate-600\">Pro Tip:</span> Press <kbd className=\"bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 text-slate-500 shadow-sm\">K</kbd> to search anytime.\r\n                    </p>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* View All Favorites Modal */}\r\n            {showAllFavorites && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/20 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-3xl shadow-2xl border border-slate-100 w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\r\n                        <div className=\"flex items-center justify-between p-6 border-b border-slate-100\">\r\n                            <h2 className=\"text-lg font-bold text-slate-900\">All Favorites</h2>\r\n                            <button onClick={() => setShowAllFavorites(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600\">\r\n                                <X size={20} />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"max-h-[60vh] overflow-y-auto p-4 space-y-2 no-scrollbar\">\r\n                            {favorites.map(fav => (\r\n                                <div key={fav.name} className=\"flex items-center justify-between p-3 rounded-2xl bg-slate-50 hover:bg-white border border-slate-200/60 hover:border-slate-300 transition-colors group shadow-sm\">\r\n                                    <button onClick={() => { onSelectCity(fav); setShowAllFavorites(false); }} className=\"flex-1 text-left font-bold text-slate-900\">\r\n                                        {fav.name}, <span className=\"text-slate-500 font-normal\">{fav.country}</span>\r\n                                    </button>\r\n                                    <button onClick={() => onRemoveFavorite(fav)} className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors\">\r\n                                        <X size={16} />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/WeatherBackground.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\r\n\r\ninterface Props {\r\n    condition: string;\r\n}\r\n\r\nexport default function WeatherBackground({ condition }: Props) {\r\n    const cond = (condition || \"\").toLowerCase();\r\n\r\n    // Determine effect type\r\n    const isRain = cond.includes(\"rain\") || cond.includes(\"drizzle\") || cond.includes(\"shower\");\r\n    const isSnow = cond.includes(\"snow\") || cond.includes(\"ice\") || cond.includes(\"freezing\") || cond.includes(\"blizzard\");\r\n    const isCloudy = cond.includes(\"cloud\") || cond.includes(\"overcast\") || cond.includes(\"fog\") || cond.includes(\"mist\") || cond.includes(\"haze\");\r\n    const isSunny = cond.includes(\"sun\") || cond.includes(\"clear\");\r\n    const isThunder = cond.includes(\"thunder\");\r\n\r\n    // Generate random particles\r\n    const particles = useMemo(() => {\r\n        return Array.from({ length: 40 }).map(() => ({\r\n            left: Math.random() * 100,\r\n            duration: 0.5 + Math.random() * 0.5,\r\n            delay: Math.random() * 2,\r\n            size: 4 + Math.random() * 6, // Slightly larger\r\n            snowDuration: 3 + Math.random() * 4\r\n        }));\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none z-0\">\r\n            {/* Background Overlays - Make them more distinct */}\r\n            {isSnow && <div className=\"absolute inset-0 bg-slate-100/30\" />}\r\n            {isRain && <div className=\"absolute inset-0 bg-slate-200/20\" />}\r\n            {isCloudy && <div className=\"absolute inset-0 bg-slate-100/40\" />}\r\n            {isSunny && <div className=\"absolute inset-0 bg-amber-50/20\" />}\r\n\r\n            {/* Sunny / Clear Effect */}\r\n            {isSunny && (\r\n                <div className=\"absolute top-[-100px] right-[-100px] w-[600px] h-[600px] bg-amber-200/30 rounded-full blur-[100px] animate-pulse\" />\r\n            )}\r\n\r\n            {/* Rain Effect */}\r\n            {isRain && (\r\n                <div className=\"absolute inset-0\">\r\n                    {particles.slice(0, 30).map((p, i) => (\r\n                        <div\r\n                            key={i}\r\n                            className=\"absolute bg-slate-400/40 w-[2px] h-[50px] rounded-full\"\r\n                            style={{\r\n                                left: `${p.left}%`,\r\n                                top: `-60px`,\r\n                                animation: `fall ${p.duration}s linear infinite`,\r\n                                animationDelay: `${p.delay}s`\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Snow Effect */}\r\n            {isSnow && (\r\n                <div className=\"absolute inset-0\">\r\n                    {particles.map((p, i) => (\r\n                        <div\r\n                            key={i}\r\n                            className=\"absolute bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.8)]\"\r\n                            style={{\r\n                                left: `${p.left}%`,\r\n                                top: `-20px`,\r\n                                width: `${p.size}px`,\r\n                                height: `${p.size}px`,\r\n                                animation: `snow ${p.snowDuration}s linear infinite`,\r\n                                animationDelay: `${p.delay * 2}s`\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Cloudy / Fog Effect */}\r\n            {isCloudy && (\r\n                <div className=\"absolute inset-0\">\r\n                    <div\r\n                        className=\"absolute top-0 left-0 w-[400%] h-full flex gap-32\"\r\n                        style={{ animation: 'drift 50s linear infinite' }}\r\n                    >\r\n                        {[...Array(6)].map((_, i) => (\r\n                            <div key={i} className=\"w-[500px] h-[400px] bg-slate-300/40 rounded-full blur-[90px]\" />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Thunder Flash */}\r\n            {isThunder && (\r\n                <div\r\n                    className=\"absolute inset-0 bg-white\"\r\n                    style={{ animation: 'flash 8s infinite' }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;;AAMe,SAAS,kBAAkB,EAAE,SAAS,EAAS;;IAC1D,MAAM,OAAO,CAAC,aAAa,EAAE,EAAE,WAAW;IAE1C,wBAAwB;IACxB,MAAM,SAAS,KAAK,QAAQ,CAAC,WAAW,KAAK,QAAQ,CAAC,cAAc,KAAK,QAAQ,CAAC;IAClF,MAAM,SAAS,KAAK,QAAQ,CAAC,WAAW,KAAK,QAAQ,CAAC,UAAU,KAAK,QAAQ,CAAC,eAAe,KAAK,QAAQ,CAAC;IAC3G,MAAM,WAAW,KAAK,QAAQ,CAAC,YAAY,KAAK,QAAQ,CAAC,eAAe,KAAK,QAAQ,CAAC,UAAU,KAAK,QAAQ,CAAC,WAAW,KAAK,QAAQ,CAAC;IACvI,MAAM,UAAU,KAAK,QAAQ,CAAC,UAAU,KAAK,QAAQ,CAAC;IACtD,MAAM,YAAY,KAAK,QAAQ,CAAC;IAEhC,4BAA4B;IAC5B,MAAM,YAAY,IAAA,wKAAO;gDAAC;YACtB,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAG,GAAG,GAAG;wDAAC,IAAM,CAAC;wBACzC,MAAM,KAAK,MAAM,KAAK;wBACtB,UAAU,MAAM,KAAK,MAAM,KAAK;wBAChC,OAAO,KAAK,MAAM,KAAK;wBACvB,MAAM,IAAI,KAAK,MAAM,KAAK;wBAC1B,cAAc,IAAI,KAAK,MAAM,KAAK;oBACtC,CAAC;;QACL;+CAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;;YAEV,wBAAU,6LAAC;gBAAI,WAAU;;;;;;YACzB,wBAAU,6LAAC;gBAAI,WAAU;;;;;;YACzB,0BAAY,6LAAC;gBAAI,WAAU;;;;;;YAC3B,yBAAW,6LAAC;gBAAI,WAAU;;;;;;YAG1B,yBACG,6LAAC;gBAAI,WAAU;;;;;;YAIlB,wBACG,6LAAC;gBAAI,WAAU;0BACV,UAAU,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,kBAC5B,6LAAC;wBAEG,WAAU;wBACV,OAAO;4BACH,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;4BAClB,KAAK,CAAC,KAAK,CAAC;4BACZ,WAAW,CAAC,KAAK,EAAE,EAAE,QAAQ,CAAC,iBAAiB,CAAC;4BAChD,gBAAgB,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC;wBACjC;uBAPK;;;;;;;;;;YAcpB,wBACG,6LAAC;gBAAI,WAAU;0BACV,UAAU,GAAG,CAAC,CAAC,GAAG,kBACf,6LAAC;wBAEG,WAAU;wBACV,OAAO;4BACH,MAAM,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;4BAClB,KAAK,CAAC,KAAK,CAAC;4BACZ,OAAO,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC;4BACpB,QAAQ,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC;4BACrB,WAAW,CAAC,KAAK,EAAE,EAAE,YAAY,CAAC,iBAAiB,CAAC;4BACpD,gBAAgB,GAAG,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;wBACrC;uBATK;;;;;;;;;;YAgBpB,0BACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBACG,WAAU;oBACV,OAAO;wBAAE,WAAW;oBAA4B;8BAE/C;2BAAI,MAAM;qBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACnB,6LAAC;4BAAY,WAAU;2BAAb;;;;;;;;;;;;;;;YAOzB,2BACG,6LAAC;gBACG,WAAU;gBACV,OAAO;oBAAE,WAAW;gBAAoB;;;;;;;;;;;;AAK5D;GA/FwB;KAAA"}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/CurrentWeatherCard.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Star } from \"lucide-react\";\r\nimport WeatherBackground from \"./WeatherBackground\";\r\n\r\n// Flexible props to handle both mock (Step 2) and real (Step 3) shapes ideally, \r\n// but we optimize for Step 3 now.\r\ninterface Props {\r\n    data: {\r\n        city: string;\r\n        date: string;\r\n        temp: number;\r\n        condition: string;\r\n        description: string;\r\n        feelsLike: number;\r\n        humidity: number;\r\n        windSpeed: number;\r\n        high: number;\r\n        low: number;\r\n        unit: 'C' | 'F';\r\n        timezone: string;\r\n    };\r\n    iconUrl: string; // New: Image URL from API\r\n    isFavorite: boolean;\r\n    onToggleFavorite: () => void;\r\n}\r\n\r\nexport default function CurrentWeatherCard({ data, iconUrl, isFavorite, onToggleFavorite }: Props) {\r\n    const [currentTime, setCurrentTime] = useState<string>(\"\");\r\n\r\n    useEffect(() => {\r\n        const updateClock = () => {\r\n            try {\r\n                const timeStr = new Date().toLocaleTimeString(\"en-US\", {\r\n                    timeZone: data.timezone,\r\n                    hour: 'numeric',\r\n                    minute: '2-digit',\r\n                    second: '2-digit',\r\n                    hour12: true\r\n                });\r\n                setCurrentTime(timeStr);\r\n            } catch (e) {\r\n                // Fallback if timezone is invalid\r\n                setCurrentTime(new Date().toLocaleTimeString());\r\n            }\r\n        };\r\n\r\n        updateClock();\r\n        const timer = setInterval(updateClock, 1000);\r\n        return () => clearInterval(timer);\r\n    }, [data.timezone]);\r\n\r\n    return (\r\n        <div className=\"col-span-12 xl:col-span-8 bg-white text-slate-900 rounded-[2rem] border border-slate-200 shadow-sm p-0 relative overflow-hidden flex flex-col h-auto transition-all duration-500 pb-0\">\r\n            <WeatherBackground condition={data.condition} />\r\n\r\n            {/* Background Decor (Static fallback) */}\r\n            <div className=\"absolute top-0 right-0 p-12 opacity-5 pointer-events-none\">\r\n                {/* Could use <img src={iconUrl} /> here huge but simplified */}\r\n            </div>\r\n\r\n            {/* Top Section */}\r\n            <div className=\"p-4 md:p-5 flex flex-col justify-start relative z-10 gap-4\">\r\n                {/* Header */}\r\n                <div className=\"flex flex-col md:flex-row md:items-start justify-between gap-4\">\r\n                    <div className=\"flex items-start gap-4\">\r\n                        <div>\r\n                            <h2 className=\"text-3xl md:text-4xl font-semibold tracking-tight mb-1 flex items-center gap-3 text-slate-900\">\r\n                                {data.city}\r\n                            </h2>\r\n                            <p className=\"text-slate-500 text-lg md:text-xl font-medium\">{data.date}</p>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={onToggleFavorite}\r\n                            className=\"mt-1 p-2 rounded-full hover:bg-slate-100 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-200\"\r\n                            aria-label={isFavorite ? \"Remove from favorites\" : \"Add to favorites\"}\r\n                        >\r\n                            <Star\r\n                                size={24}\r\n                                className={`transition-all ${isFavorite ? \"fill-amber-400 text-amber-400\" : \"text-slate-300 hover:text-amber-400\"}`}\r\n                            />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"bg-slate-100/50 px-4 py-2 rounded-lg text-sm font-medium text-slate-800 border border-slate-200 self-start\">\r\n                        Live Updates\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col md:flex-row items-center md:items-end justify-between gap-4 md:gap-8 animate-in fade-in zoom-in duration-500 pb-0\">\r\n                    <div className=\"flex flex-col\">\r\n                        <div className=\"text-7xl md:text-8xl font-semibold tracking-tight text-slate-900 leading-none tabular-nums\">\r\n                            {data.temp}°{data.unit}\r\n                        </div>\r\n                        {currentTime && (\r\n                            <div className=\"text-xl md:text-2xl font-medium text-slate-900 mt-1 tracking-tight tabular-nums\">\r\n                                {currentTime}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-1 mb-1 items-center md:items-end\">\r\n                        <div className=\"flex items-center gap-2 text-lg md:text-xl font-medium capitalize text-slate-900\">\r\n                            <img src={`https:${iconUrl}`} alt={data.condition} className=\"w-10 h-10 object-contain\" />\r\n                            {data.condition}\r\n                        </div>\r\n                        <div className=\"text-slate-400 font-normal text-base md:text-lg tabular-nums\">\r\n                            H: {data.high}°{data.unit}  &bull;  L: {data.low}°{data.unit}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAwBe,SAAS,mBAAmB,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,gBAAgB,EAAS;;IAC7F,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAS;IAEvD,IAAA,0KAAS;wCAAC;YACN,MAAM;4DAAc;oBAChB,IAAI;wBACA,MAAM,UAAU,IAAI,OAAO,kBAAkB,CAAC,SAAS;4BACnD,UAAU,KAAK,QAAQ;4BACvB,MAAM;4BACN,QAAQ;4BACR,QAAQ;4BACR,QAAQ;wBACZ;wBACA,eAAe;oBACnB,EAAE,OAAO,GAAG;wBACR,kCAAkC;wBAClC,eAAe,IAAI,OAAO,kBAAkB;oBAChD;gBACJ;;YAEA;YACA,MAAM,QAAQ,YAAY,aAAa;YACvC;gDAAO,IAAM,cAAc;;QAC/B;uCAAG;QAAC,KAAK,QAAQ;KAAC;IAElB,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,qJAAiB;gBAAC,WAAW,KAAK,SAAS;;;;;;0BAG5C,6LAAC;gBAAI,WAAU;;;;;;0BAKf,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAG,WAAU;0DACT,KAAK,IAAI;;;;;;0DAEd,6LAAC;gDAAE,WAAU;0DAAiD,KAAK,IAAI;;;;;;;;;;;;kDAG3E,6LAAC;wCACG,SAAS;wCACT,WAAU;wCACV,cAAY,aAAa,0BAA0B;kDAEnD,cAAA,6LAAC,6MAAI;4CACD,MAAM;4CACN,WAAW,CAAC,eAAe,EAAE,aAAa,kCAAkC,uCAAuC;;;;;;;;;;;;;;;;;0CAK/H,6LAAC;gCAAI,WAAU;0CAA6G;;;;;;;;;;;;kCAKhI,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;4CACV,KAAK,IAAI;4CAAC;4CAAE,KAAK,IAAI;;;;;;;oCAEzB,6BACG,6LAAC;wCAAI,WAAU;kDACV;;;;;;;;;;;;0CAIb,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,KAAK,CAAC,MAAM,EAAE,SAAS;gDAAE,KAAK,KAAK,SAAS;gDAAE,WAAU;;;;;;4CAC5D,KAAK,SAAS;;;;;;;kDAEnB,6LAAC;wCAAI,WAAU;;4CAA+D;4CACtE,KAAK,IAAI;4CAAC;4CAAE,KAAK,IAAI;4CAAC;4CAAc,KAAK,GAAG;4CAAC;4CAAE,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxF;GAvFwB;KAAA"}},
    {"offset": {"line": 1147, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/HourlyForecast.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UIHourly } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    data: UIHourly[];\r\n    unit: 'C' | 'F';\r\n}\r\n\r\nexport default function HourlyForecast({ data, unit }: Props) {\r\n    return (\r\n        <div className=\"col-span-12\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-xl font-bold text-slate-900\">Hourly Forecast</h3>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4\">\r\n                {data.map((hour, idx) => {\r\n                    const temp = unit === 'C' ? hour.temp_c : hour.temp_f;\r\n                    return (\r\n                        <div\r\n                            key={idx}\r\n                            className={`p-2 py-3 rounded-2xl border flex flex-col items-center gap-1 transition-all hover:shadow-lg ${hour.isNow\r\n                                ? \"bg-slate-100 text-slate-900 border-slate-200 shadow-sm\"\r\n                                : \"bg-white border-slate-200 hover:border-slate-300 text-slate-600 hover:bg-slate-50\"\r\n                                }`}\r\n                        >\r\n                            <span className={`text-sm font-medium text-slate-500`}>{hour.time}</span>\r\n                            <img src={`https:${hour.conditionIcon}`} alt={hour.conditionText} className=\"w-8 h-8 object-contain\" />\r\n                            <span className=\"text-lg font-bold text-slate-900\">{temp}°</span>\r\n                            {hour.chance_of_rain > 20 && (\r\n                                <span className=\"text-xs font-bold text-slate-600\">{hour.chance_of_rain}% Rain</span>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAQe,SAAS,eAAe,EAAE,IAAI,EAAE,IAAI,EAAS;IACxD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAGrD,6LAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,MAAM;oBACb,MAAM,OAAO,SAAS,MAAM,KAAK,MAAM,GAAG,KAAK,MAAM;oBACrD,qBACI,6LAAC;wBAEG,WAAW,CAAC,4FAA4F,EAAE,KAAK,KAAK,GAC9G,2DACA,qFACA;;0CAEN,6LAAC;gCAAK,WAAW,CAAC,kCAAkC,CAAC;0CAAG,KAAK,IAAI;;;;;;0CACjE,6LAAC;gCAAI,KAAK,CAAC,MAAM,EAAE,KAAK,aAAa,EAAE;gCAAE,KAAK,KAAK,aAAa;gCAAE,WAAU;;;;;;0CAC5E,6LAAC;gCAAK,WAAU;;oCAAoC;oCAAK;;;;;;;4BACxD,KAAK,cAAc,GAAG,oBACnB,6LAAC;gCAAK,WAAU;;oCAAoC,KAAK,cAAc;oCAAC;;;;;;;;uBAVvE;;;;;gBAcjB;;;;;;;;;;;;AAIhB;KA9BwB"}},
    {"offset": {"line": 1247, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/DailyForecast.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { CloudRain, CloudSun, Droplets, MapPin, Thermometer, Umbrella, Wind } from \"lucide-react\";\r\nimport { UIDaily } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    data: UIDaily[];\r\n    unit: 'C' | 'F';\r\n}\r\n\r\nexport default function DailyForecast({ data, unit }: Props) {\r\n    return (\r\n        <div className=\"bg-white border border-slate-200 shadow-sm rounded-[2rem] p-8 flex flex-col\">\r\n            <h3 className=\"text-xl font-bold text-slate-900 mb-6\">7-Day Forecast</h3>\r\n            <div className=\"flex flex-col gap-1 flex-1\">\r\n                {data.map((day, idx) => {\r\n                    return (\r\n                        <div key={idx} className=\"group flex items-center justify-between py-4 border-b border-slate-100 last:border-0 hover:bg-slate-50 px-2 rounded-xl transition-colors cursor-default\">\r\n                            <div className=\"flex items-center gap-4 w-32\">\r\n                                <span className=\"text-slate-500 font-medium w-12\">{day.dayName}</span>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <img src={`https:${day.conditionIcon}`} alt={day.conditionText} className=\"w-8 h-8 object-contain\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex-1 flex items-center justify-center\">\r\n                                {day.chance_of_rain > 0 ? (\r\n                                    <div className=\"flex items-center gap-1 text-slate-600 bg-slate-100 px-2 py-1 rounded-lg\">\r\n                                        <CloudRain size={14} />\r\n                                        <span className=\"text-sm font-bold\">{day.chance_of_rain}%</span>\r\n                                    </div>\r\n                                ) : (\r\n                                    <span className=\"text-sm text-slate-400 font-medium\">{day.conditionText}</span>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-4 w-32 justify-end\">\r\n                                <span className=\"font-bold text-slate-900\">{unit === 'C' ? day.max_c : day.max_f}°</span>\r\n                                <span className=\"text-slate-400 font-medium\">{unit === 'C' ? day.min_c : day.min_f}°</span>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            {data.some(d => d.isMock) && (\r\n                <div className=\"mt-4 pt-4 border-t border-slate-100 text-center\">\r\n                    <p className=\"text-[10px] text-slate-400\">\r\n                        * Extended forecast estimated.\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAQe,SAAS,cAAc,EAAE,IAAI,EAAE,IAAI,EAAS;IACvD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,6LAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,KAAK;oBACZ,qBACI,6LAAC;wBAAc,WAAU;;0CACrB,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAAmC,IAAI,OAAO;;;;;;kDAC9D,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,KAAK,CAAC,MAAM,EAAE,IAAI,aAAa,EAAE;4CAAE,KAAK,IAAI,aAAa;4CAAE,WAAU;;;;;;;;;;;;;;;;;0CAIlF,6LAAC;gCAAI,WAAU;0CACV,IAAI,cAAc,GAAG,kBAClB,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,gOAAS;4CAAC,MAAM;;;;;;sDACjB,6LAAC;4CAAK,WAAU;;gDAAqB,IAAI,cAAc;gDAAC;;;;;;;;;;;;yDAG5D,6LAAC;oCAAK,WAAU;8CAAsC,IAAI,aAAa;;;;;;;;;;;0CAI/E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;;4CAA4B,SAAS,MAAM,IAAI,KAAK,GAAG,IAAI,KAAK;4CAAC;;;;;;;kDACjF,6LAAC;wCAAK,WAAU;;4CAA8B,SAAS,MAAM,IAAI,KAAK,GAAG,IAAI,KAAK;4CAAC;;;;;;;;;;;;;;uBArBjF;;;;;gBAyBlB;;;;;;YAEH,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,MAAM,mBACpB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;;;;;;AAO9D;KA3CwB"}},
    {"offset": {"line": 1422, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/DetailsGrid.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UIDetails } from \"../lib/types\";\r\nimport { Sunrise, Sunset, Sun, Droplets, Wind, Thermometer, Gauge, Eye } from \"lucide-react\";\r\n\r\ninterface Props {\r\n    data: UIDetails;\r\n    unit: 'C' | 'F';\r\n}\r\n\r\nexport default function DetailsGrid({ data: details, unit }: Props) {\r\n    return (\r\n        <div className=\"bg-white rounded-[2rem] p-8 border border-slate-200 shadow-sm\">\r\n            <h3 className=\"text-xl font-semibold text-slate-900 mb-6\">Weather Details</h3>\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 rounded-full bg-slate-100 text-slate-500\">\r\n                            <Thermometer size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-normal text-slate-500\">Feels Like</p>\r\n                            <p className=\"text-lg font-semibold text-slate-900\">{unit === 'C' ? details.feelsLike_c : details.feelsLike_f}°{unit}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 rounded-full bg-slate-100 text-slate-500\">\r\n                            <Wind size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-normal text-slate-500\">Wind</p>\r\n                            <p className=\"text-lg font-semibold text-slate-900\">{details.wind_kph} kph</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 rounded-full bg-slate-100 text-slate-500\">\r\n                            <Droplets size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-normal text-slate-500\">Humidity</p>\r\n                            <p className=\"text-lg font-semibold text-slate-900\">{details.humidity}%</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 rounded-full bg-slate-100 text-slate-500\">\r\n                            <Sun size={24} />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-normal text-slate-500\">UV Index</p>\r\n                            <p className=\"text-lg font-semibold text-slate-900\">{details.uv}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;;;AAOe,SAAS,YAAY,EAAE,MAAM,OAAO,EAAE,IAAI,EAAS;IAC9D,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAA4C;;;;;;0BAC1D,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,kOAAW;4CAAC,MAAM;;;;;;;;;;;kDAEvB,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAqC;;;;;;0DAClD,6LAAC;gDAAE,WAAU;;oDAAwC,SAAS,MAAM,QAAQ,WAAW,GAAG,QAAQ,WAAW;oDAAC;oDAAE;;;;;;;;;;;;;;;;;;;0CAGxH,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,6MAAI;4CAAC,MAAM;;;;;;;;;;;kDAEhB,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAqC;;;;;;0DAClD,6LAAC;gDAAE,WAAU;;oDAAwC,QAAQ,QAAQ;oDAAC;;;;;;;;;;;;;;;;;;;;;;;;;kCAKlF,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,yNAAQ;4CAAC,MAAM;;;;;;;;;;;kDAEpB,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAqC;;;;;;0DAClD,6LAAC;gDAAE,WAAU;;oDAAwC,QAAQ,QAAQ;oDAAC;;;;;;;;;;;;;;;;;;;0CAG9E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC,0MAAG;4CAAC,MAAM;;;;;;;;;;;kDAEf,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAqC;;;;;;0DAClD,6LAAC;gDAAE,WAAU;0DAAwC,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO3F;KAjDwB"}},
    {"offset": {"line": 1687, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/components/ExtraDetailsGrid.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { CloudRain, Cloud, Wind, Moon, Droplets, Leaf } from \"lucide-react\";\r\nimport { UIExtraDetails } from \"../lib/types\";\r\n\r\ninterface Props {\r\n    data: UIExtraDetails;\r\n    unit: 'C' | 'F';\r\n}\r\n\r\nexport default function ExtraDetailsGrid({ data, unit }: Props) {\r\n    const items = [\r\n        { label: \"Precipitation\", value: `${data.precip_mm} mm`, icon: CloudRain },\r\n        { label: \"Cloud Cover\", value: `${data.cloud}%`, icon: Cloud },\r\n        { label: \"Wind Gust\", value: `${data.gust_kph} kph`, icon: Wind },\r\n        { label: \"Dew Point\", value: unit === 'C' ? `${data.dewpoint_c}°C` : `${data.dewpoint_f}°F`, icon: Droplets },\r\n        { label: \"Moon Phase\", value: data.moon_phase, icon: Moon, span: 2 },\r\n    ];\r\n\r\n    // Add AQI if available/relevant? We have EPA index.\r\n    // 1-2 Good, 3-4 Moderate, 5-6 Unhealthy.\r\n    const getAqiLabel = (idx: number) => {\r\n        if (idx <= 2) return \"Good\";\r\n        if (idx <= 4) return \"Moderate\";\r\n        return \"Unhealthy\";\r\n    }\r\n\r\n    if (data.us_epa_index > 0) {\r\n        items.push({ label: \"Air Quality\", value: getAqiLabel(data.us_epa_index), icon: Leaf });\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n            {items.map((detail, idx) => {\r\n                const Icon = detail.icon;\r\n                return (\r\n                    <div key={idx} className={`bg-white border border-slate-200 shadow-sm p-5 rounded-3xl flex flex-col justify-between gap-2 hover:bg-slate-50 transition-colors h-24 ${detail.span ? \"col-span-2\" : \"\"}`}>\r\n                        <div className=\"flex items-center justify-between text-slate-500\">\r\n                            <span className=\"text-xs font-semibold uppercase tracking-wider\">{detail.label}</span>\r\n                            <Icon size={18} className=\"text-slate-400\" />\r\n                        </div>\r\n                        <div className=\"text-xl font-semibold text-slate-900 truncate\" title={detail.value}>{detail.value}</div>\r\n                    </div>\r\n                );\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAQe,SAAS,iBAAiB,EAAE,IAAI,EAAE,IAAI,EAAS;IAC1D,MAAM,QAAQ;QACV;YAAE,OAAO;YAAiB,OAAO,GAAG,KAAK,SAAS,CAAC,GAAG,CAAC;YAAE,MAAM,gOAAS;QAAC;QACzE;YAAE,OAAO;YAAe,OAAO,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;YAAE,MAAM,gNAAK;QAAC;QAC7D;YAAE,OAAO;YAAa,OAAO,GAAG,KAAK,QAAQ,CAAC,IAAI,CAAC;YAAE,MAAM,6MAAI;QAAC;QAChE;YAAE,OAAO;YAAa,OAAO,SAAS,MAAM,GAAG,KAAK,UAAU,CAAC,EAAE,CAAC,GAAG,GAAG,KAAK,UAAU,CAAC,EAAE,CAAC;YAAE,MAAM,yNAAQ;QAAC;QAC5G;YAAE,OAAO;YAAc,OAAO,KAAK,UAAU;YAAE,MAAM,6MAAI;YAAE,MAAM;QAAE;KACtE;IAED,oDAAoD;IACpD,yCAAyC;IACzC,MAAM,cAAc,CAAC;QACjB,IAAI,OAAO,GAAG,OAAO;QACrB,IAAI,OAAO,GAAG,OAAO;QACrB,OAAO;IACX;IAEA,IAAI,KAAK,YAAY,GAAG,GAAG;QACvB,MAAM,IAAI,CAAC;YAAE,OAAO;YAAe,OAAO,YAAY,KAAK,YAAY;YAAG,MAAM,6MAAI;QAAC;IACzF;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACV,MAAM,GAAG,CAAC,CAAC,QAAQ;YAChB,MAAM,OAAO,OAAO,IAAI;YACxB,qBACI,6LAAC;gBAAc,WAAW,CAAC,wIAAwI,EAAE,OAAO,IAAI,GAAG,eAAe,IAAI;;kCAClM,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAkD,OAAO,KAAK;;;;;;0CAC9E,6LAAC;gCAAK,MAAM;gCAAI,WAAU;;;;;;;;;;;;kCAE9B,6LAAC;wBAAI,WAAU;wBAAgD,OAAO,OAAO,KAAK;kCAAG,OAAO,KAAK;;;;;;;eAL3F;;;;;QAQlB;;;;;;AAGZ;KArCwB"}},
    {"offset": {"line": 1807, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/lib/storage.ts"],"sourcesContent":["import { City } from \"./cities\";\r\n\r\nconst STORAGE_KEYS = {\r\n    RECENT: 'weatherly_recent',\r\n    FAVORITES: 'weatherly_favorites',\r\n    LAST_CITY: 'weatherly_last_active' // To resume where user left off\r\n};\r\n\r\nexport const getRecentSearches = (): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.RECENT);\r\n        return item ? JSON.parse(item) : [];\r\n    } catch (e) { return []; }\r\n};\r\n\r\nexport const addRecentSearch = (city: City) => {\r\n    if (typeof window === 'undefined') return;\r\n    const recent = getRecentSearches();\r\n\r\n    // Remove duplicate if exists, add to front\r\n    const filtered = recent.filter(c => c.name !== city.name);\r\n    const updated = [city, ...filtered].slice(0, 6); // Keep last 6\r\n\r\n    localStorage.setItem(STORAGE_KEYS.RECENT, JSON.stringify(updated));\r\n    return updated;\r\n};\r\n\r\nexport const removeRecentSearch = (city: City) => {\r\n    if (typeof window === 'undefined') return [];\r\n    const recent = getRecentSearches();\r\n    const updated = recent.filter(c => c.name !== city.name);\r\n    localStorage.setItem(STORAGE_KEYS.RECENT, JSON.stringify(updated));\r\n    return updated;\r\n}\r\n\r\nexport const getFavorites = (): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.FAVORITES);\r\n        return item ? JSON.parse(item) : [];\r\n    } catch (e) { return []; }\r\n};\r\n\r\nexport const toggleFavorite = (city: City): City[] => {\r\n    if (typeof window === 'undefined') return [];\r\n    const favs = getFavorites();\r\n    const exists = favs.find(c => c.name === city.name);\r\n\r\n    let updated;\r\n    if (exists) {\r\n        updated = favs.filter(c => c.name !== city.name);\r\n    } else {\r\n        updated = [city, ...favs];\r\n    }\r\n\r\n    localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(updated));\r\n    return updated;\r\n};\r\n\r\nexport const saveLastCity = (city: City) => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.setItem(STORAGE_KEYS.LAST_CITY, JSON.stringify(city));\r\n    }\r\n}\r\n\r\nexport const getLastCity = (): City | null => {\r\n    if (typeof window === 'undefined') return null;\r\n    try {\r\n        const item = localStorage.getItem(STORAGE_KEYS.LAST_CITY);\r\n        return item ? JSON.parse(item) : null;\r\n    } catch { return null }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA,MAAM,eAAe;IACjB,QAAQ;IACR,WAAW;IACX,WAAW,wBAAwB,gCAAgC;AACvE;AAEO,MAAM,oBAAoB;IAC7B;;IACA,IAAI;QACA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,MAAM;QACrD,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;IACvC,EAAE,OAAO,GAAG;QAAE,OAAO,EAAE;IAAE;AAC7B;AAEO,MAAM,kBAAkB,CAAC;IAC5B;;IACA,MAAM,SAAS;IAEf,2CAA2C;IAC3C,MAAM,WAAW,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;IACxD,MAAM,UAAU;QAAC;WAAS;KAAS,CAAC,KAAK,CAAC,GAAG,IAAI,cAAc;IAE/D,aAAa,OAAO,CAAC,aAAa,MAAM,EAAE,KAAK,SAAS,CAAC;IACzD,OAAO;AACX;AAEO,MAAM,qBAAqB,CAAC;IAC/B;;IACA,MAAM,SAAS;IACf,MAAM,UAAU,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;IACvD,aAAa,OAAO,CAAC,aAAa,MAAM,EAAE,KAAK,SAAS,CAAC;IACzD,OAAO;AACX;AAEO,MAAM,eAAe;IACxB;;IACA,IAAI;QACA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,SAAS;QACxD,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;IACvC,EAAE,OAAO,GAAG;QAAE,OAAO,EAAE;IAAE;AAC7B;AAEO,MAAM,iBAAiB,CAAC;IAC3B;;IACA,MAAM,OAAO;IACb,MAAM,SAAS,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;IAElD,IAAI;IACJ,IAAI,QAAQ;QACR,UAAU,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;IACnD,OAAO;QACH,UAAU;YAAC;eAAS;SAAK;IAC7B;IAEA,aAAa,OAAO,CAAC,aAAa,SAAS,EAAE,KAAK,SAAS,CAAC;IAC5D,OAAO;AACX;AAEO,MAAM,eAAe,CAAC;IACzB,wCAAmC;QAC/B,aAAa,OAAO,CAAC,aAAa,SAAS,EAAE,KAAK,SAAS,CAAC;IAChE;AACJ;AAEO,MAAM,cAAc;IACvB;;IACA,IAAI;QACA,MAAM,OAAO,aAAa,OAAO,CAAC,aAAa,SAAS;QACxD,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;IACrC,EAAE,OAAM;QAAE,OAAO;IAAK;AAC1B"}},
    {"offset": {"line": 1908, "column": 0}, "map": {"version":3,"sources":["file:///F:/Github%20Projects/Nimbus-Weather-Engine/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { CloudSun, Menu, Loader2, X } from \"lucide-react\";\nimport Sidebar from \"./components/Sidebar\";\nimport CurrentWeatherCard from \"./components/CurrentWeatherCard\";\nimport HourlyForecast from \"./components/HourlyForecast\";\nimport DailyForecast from \"./components/DailyForecast\";\nimport DetailsGrid from \"./components/DetailsGrid\";\nimport ExtraDetailsGrid from \"./components/ExtraDetailsGrid\";\nimport { UIWeather, SearchResultItem } from \"./lib/types\";\nimport {\n  getRecentSearches, addRecentSearch, removeRecentSearch,\n  getFavorites, toggleFavorite,\n  getLastCity, saveLastCity\n} from \"./lib/storage\";\nimport { City } from \"./lib/cities\"; // Keep for type compat if needed, or refactor storage to use new types\n\n// Adapter for storage compatibility (Old City type vs API)\n// Ideally we'd migrate storage to use a unified type, but for now we map it on the fly.\nfunction toCity(ui: UIWeather): City {\n  return {\n    name: ui.location.name,\n    country: ui.location.country,\n    lat: ui.location.lat,\n    lon: ui.location.lon\n  };\n}\n\nexport default function Home() {\n  const [weather, setWeather] = useState<UIWeather | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const [favorites, setFavorites] = useState<City[]>([]);\n  const [recent, setRecent] = useState<City[]>([]);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [unit, setUnit] = useState<'C' | 'F'>('C');\n\n  // Initial Load\n  useEffect(() => {\n    setFavorites(getFavorites());\n    setRecent(getRecentSearches());\n\n    // Check for last city\n    const last = getLastCity();\n    const initialQuery = last ? `${last.lat},${last.lon}` : \"Helsinki\";\n\n    fetchWeather(initialQuery);\n  }, []);\n\n  const fetchWeather = async (query: string) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(`/api/weather?q=${encodeURIComponent(query)}`);\n      if (!res.ok) throw new Error(\"Failed to fetch weather\");\n      const data: UIWeather = await res.json();\n      setWeather(data);\n\n      // Save valid load as \"last city\"\n      saveLastCity(toCity(data));\n\n    } catch (err) {\n      setError(\"Could not load weather data. Please try again.\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSelectCity = (query: string) => {\n    fetchWeather(query);\n    // Recent search addition happens after successful load usually, but we can do optimistic text link here?\n    // Actually, API returns full location info, so best to add to recent AFTER fetch succeeds.\n    // However, SearchBox passes raw query. Wait for weather load to add to recent?\n    // Let's add inside the useEffect or just assume it works.\n    setIsMobileMenuOpen(false);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  // Add to recent when weather loads successfully\n  useEffect(() => {\n    if (weather) {\n      const c = toCity(weather);\n      // Only add if it's different from top recent? Or just re-add.\n      const updated = addRecentSearch(c);\n      if (updated) setRecent(updated);\n    }\n  }, [weather]);\n\n  const handleToggleFavorite = () => {\n    if (!weather) return;\n    const c = toCity(weather);\n    const updated = toggleFavorite(c);\n    setFavorites(updated);\n  };\n\n  const isCurrentFavorite = weather ? favorites.some(c => c.name === weather.location.name) : false;\n\n  // Render Helpers\n  const renderContent = () => {\n    if (loading && !weather) {\n      return (\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] gap-4\">\n          <Loader2 size={48} className=\"text-blue-500 animate-spin\" />\n          <p className=\"text-slate-400 font-medium\">Loading forecast...</p>\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] gap-4\">\n          <p className=\"text-red-500 font-bold text-lg\">{error}</p>\n          <button onClick={() => fetchWeather(\"Helsinki\")} className=\"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700\">Try Default</button>\n        </div>\n      );\n    }\n\n    if (!weather) return null;\n\n    // Map UIWeather to components\n    // CurrentWeatherCard expects slightly different props?\n    // Check CurrentWeatherCard props signature. It expects 'CurrentWeather' from 'lib/weatherMock'.\n    // We need to update components to accept new types or map them here.\n    // To save file edits, let's map on the fly to match the component props if possible OR preferably update components to new types.\n    // Since we are upgrading, let's cast 'weather' to expected props.\n\n    const currentProps = {\n      city: weather.location.name,\n      country: weather.location.country,\n      date: new Date(weather.location.localtime).toLocaleDateString(\"en-GB\", { weekday: 'long', day: 'numeric', month: 'short' }),\n      temp: unit === 'C' ? weather.current.temp_c : weather.current.temp_f,\n      condition: weather.current.conditionText as any, // Component expects strict union, loosen it or fix component\n      description: weather.current.conditionText,\n      feelsLike: unit === 'C' ? weather.current.feelslike_c : weather.current.feelslike_f,\n      humidity: weather.current.humidity,\n      windSpeed: weather.current.wind_kph,\n      high: unit === 'C' ? (weather.daily[0]?.max_c || 0) : (weather.daily[0]?.max_f || 0),\n      low: unit === 'C' ? (weather.daily[0]?.min_c || 0) : (weather.daily[0]?.min_f || 0),\n      unit,\n      timezone: weather.location.tz_id,\n      icon: Loader2 // Dummy, component handles icon rendering? No, component expects explicit icon component.\n      // Wait, component rendering needs dynamic icon.\n      // The API gives us icon URL \"//cdn.....\". \n      // We need to update CurrentWeatherCard to accept image URL instead of Lucide Icon component.\n    };\n\n    return (\n      <div>\n        <div className=\"grid grid-cols-12 gap-8 animate-in fade-in duration-500\">\n          {/* Left Column */}\n          <div className=\"col-span-12 xl:col-span-8 flex flex-col gap-8\">\n            <CurrentWeatherCard\n              data={currentProps as any}\n              isFavorite={isCurrentFavorite}\n              onToggleFavorite={handleToggleFavorite}\n              iconUrl={weather.current.conditionIcon}\n            />\n            <HourlyForecast data={weather.hourly} unit={unit} />\n            <DailyForecast data={weather.daily} unit={unit} />\n          </div>\n\n          {/* Right Column */}\n          <div className=\"col-span-12 xl:col-span-4 flex flex-col gap-8\">\n            <DetailsGrid data={weather.details as any} unit={unit} />\n            {weather.extraDetails && <ExtraDetailsGrid data={weather.extraDetails} unit={unit} />}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-blue-500/30 selection:text-blue-900\">\n\n      <div className={`${isMobileMenuOpen ? 'fixed inset-0 z-50 bg-slate-50 overflow-y-auto' : 'hidden lg:block'}`}>\n        <div className=\"lg:hidden p-4 flex justify-end\">\n          <button onClick={() => setIsMobileMenuOpen(false)} className=\"p-2 bg-white border border-slate-200 rounded-full text-slate-600 shadow-sm\"><X /></button>\n        </div>\n        <Sidebar\n          favorites={favorites}\n          recent={recent}\n          onSearch={handleSelectCity}\n          onSelectCity={(city) => {\n            handleSelectCity(`${city.lat},${city.lon}`);\n            setIsMobileMenuOpen(false);\n          }}\n          onRemoveFavorite={(c) => {\n            const updated = toggleFavorite(c);\n            setFavorites(updated);\n          }}\n          onRemoveRecent={(c) => {\n            const updated = removeRecentSearch(c);\n            setRecent(updated);\n          }}\n          unit={unit}\n          setUnit={setUnit}\n        />\n      </div>\n\n      {/* Mobile Header */}\n      <div className=\"lg:hidden flex items-center justify-between p-4 bg-white border-b border-slate-200 sticky top-0 z-40 shadow-sm\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"p-1.5 bg-slate-500 rounded-lg text-white\">\n            <CloudSun size={20} />\n          </div>\n          <span className=\"font-bold text-lg text-slate-900\">Weatherly</span>\n        </div>\n        <button onClick={() => setIsMobileMenuOpen(true)} className=\"p-2 bg-white rounded-full shadow-sm border border-slate-200 text-slate-600\">\n          <Menu size={20} />\n        </button>\n      </div>\n\n      {/* Main Content Area */}\n      <main className=\"lg:ml-[320px] min-h-screen p-4 md:p-8 lg:p-12 max-w-[1600px] mx-auto flex flex-col\">\n        {renderContent()}\n\n        {/* Credit */}\n        <div className=\"mt-auto pt-8 text-center md:text-right\">\n          <a href=\"https://www.weatherapi.com/\" title=\"Free Weather API\" target=\"_blank\" rel=\"noreferrer\" className=\"text-[10px] text-slate-400 hover:text-slate-600 uppercase tracking-widest font-bold\">\n            Powered by WeatherAPI.com\n          </a>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}